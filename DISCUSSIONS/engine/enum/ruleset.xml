<!-- 
  $RCSfile: ruleset.xml,v $
  $Revision: 1.2 $
  $Author: langer $
  $Date: 2009-10-16 22:11:21 $

  This software was produced by NIST, an agency of the
  U.S. government, and by statute is not subject to copyright in the
  United States.  Recipients of this software assume all
  responsibilities associated with its operation, modification and
  maintenance. However, to facilitate maintenance we ask that before
  distributing modified versions of this software, you first contact
  the authors at oof_manager@ctcms.nist.gov.
-->


  <para>
    &oof2; provides two sets of refinement rules.  When <link
    linkend="RegisteredClass-Refine">refining</link> a &skel;, the
    refinement rules determine how the interior of an element is
    subdivided after the subdivision of its edges has been determined.
    The rule set appears as an argument to the <link
    linkend="RegisteredClass-RefinementDegree"><varname>degree</varname></link>
    parameter of the <xref linkend="RegisteredClass-Refine"/> &skel;
    modifier.
  </para>
  <para>
    The rule sets are displayed in <xref
    linkend="Table:refine_rule_quad"/> and <xref
    linkend="Table:refine_rule_tri"/>.  The tables contain diagrams
    for each possible element geometry and all possible ways of
    subdividing the element's edges.  Each diagram shows how the
    element will be subdivided (after appropriate rotations and
    distortions to bring it into alignment with the actual shape and
    position of the &skel; element).
  </para>

  <para>
    The two sets of rules are called <emphasis>conservative</emphasis>
    and <emphasis>liberal</emphasis>.  The conservative rules never
    change the topology of an element: quadrilateral elements will
    beget little quadrilaterals, and triangular elements will beget
    little triangles.<footnote>
      <simpara>
	It's not always possible to preserve topology when <link
	linkend="RegisteredClass-Bisection">bisecting</link>
	quadrilaterals.  When using conservative bisection, &oof2;
	will try to preserve topology by bisecting
	<emphasis>unmarked</emphasis> segments.  If this fails, the
	user will be notified, and &oof2; will proceed using the
	<quote>wrong</quote> kind of element.
      </simpara>
    </footnote> The liberal rules, in some cases,
    will create triangles from quadrilaterals and <foreignphrase>vice
    versa</foreignphrase>.  When using the liberal rule set, &oof2;
    will substitute the corresponding conservative rule if it would
    produce a configuration with lower <link
    linkend="Section-Concepts-Skeleton-Energy">effective
      energy</link>.<footnote>
      <simpara>
	The effective energy is calculated with &agr;=0.5.  It may be
	adjustable by the user in some future version of &oof2;.
      </simpara>
    </footnote>
  </para>

  <para>
    There are two distinct ways in which two segments can be marked
    for subdivision on a quadrilateral element.  The column marked
    <quote>opposite</quote> in <xref
    linkend="Table:refine_rule_quad"/> contains the rules that apply
    when the marked edges are on opposite sides of the quadrilateral.
    The column marked <quote>adjacent</quote> contains the rules that
    apply when the marked edges are next to one another.
  </para>

  <table id='Table:refine_rule_quad'>
    <title>Refinement Rules for Quadrilaterals</title>
    <tgroup cols='7'>
      <colspec colnum='3' colname='c3'/>
      <colspec colnum='4' colname='c4'/>
      <colspec colnum='5' colname='c5'/>
      <colspec colnum='6' colname='c6'/>
      <colspec colnum='7' colname='c7'/>
      <thead>
	<row>
	  <entry morerows='1' valign='middle'><link linkend='RegisteredClass-RefinementDegree'><varname>degree</varname></link></entry>
	  <entry morerows='1' valign='middle'><link
	      linkend='Enum-RuleSet'><varname>rule_set</varname></link></entry>
	  <entry  namest='c3' nameend='c7'>No. of Marked Segments</entry>
	</row>
	<row>
	  <entry>1</entry>
	  <entry>2 (opposite)</entry>
	  <entry>2 (adjacent)</entry>
	  <entry>3</entry>
	  <entry>4</entry>
	</row>
      </thead>
      <tbody>
	<row>
	  <entry morerows='1' valign='middle'><xref
	      linkend='RegisteredClass-Bisection'/></entry>
	  <entry align='center'>Conservative</entry>
	  <entry align='center'>N/A</entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q2c_bi1.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q2c_bi1.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q2c_bi2.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q2c_bi2.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>N/A</entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q4c_bi.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q4c_bi.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	</row>
	<row>
	  <entry align='center'>Liberal</entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q1l_bi.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q1l_bi.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q2c_bi1.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q2c_bi1.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q2c_bi2.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q2c_bi2.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q3l_bi.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q3l_bi.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q4c_bi.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q4c_bi.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	</row>
	<row>
	  <entry morerows='1' valign='middle'><xref
	      linkend='RegisteredClass-Trisection'/></entry>
	  <entry align='center'>Conservative</entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q1c_tri.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q1c_tri.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q2c_tri1.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q2c_tri1.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q2c_tri2.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q2c_tri2.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q3c_tri.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q3c_tri.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q4c_tri.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q4c_tri.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	</row>
	<row>
	  <entry align='center'>Liberal</entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q1l_tri.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q1l_tri.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q2c_tri1.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q2c_tri1.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q2c_tri2.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q2c_tri2.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q3l_tri.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q3l_tri.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/q4c_tri.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/q4c_tri.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	</row>
      </tbody>
    </tgroup>
  </table>



  <table id='Table:refine_rule_tri'>
    <title>Refinement Rules for Triangles</title>
    <tgroup cols='5'>
      <colspec colnum='3' colname='c3'/>
      <colspec colnum='4' colname='c4'/>
      <colspec colnum='5' colname='c5'/>
      <thead>
	<row>
	  <entry morerows='1'><link linkend='RegisteredClass-RefinementDegree'><varname>degree</varname></link></entry>
	  <entry morerows='1'><link
	      linkend='Enum-RuleSet'><varname>rule_set</varname></link></entry>
	  <entry  namest='c3' nameend='c5'>No. of Marked
	    Segments</entry>
	</row>
	<row>
	  <entry>1</entry>
	  <entry>2</entry>
	  <entry>3</entry>
	</row>
      </thead>
      <tbody>
	<row>
	  <entry morerows='1' valign='middle'><xref
	      linkend='RegisteredClass-Bisection'/></entry>
	  <entry align='center'>Conservative</entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/t1c_bi.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/t1c_bi.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/t2c_bi.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/t2c_bi.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/t3c_bi.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/t3c_bi.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	</row>
	<row>
	  <entry align='center'>Liberal</entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/t1c_bi.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/t1c_bi.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/t2l_bi.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/t2l_bi.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/t3l_bi.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/t3l_bi.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	</row>
	<row>
	  <entry morerows='1' valign='middle'><xref
	      linkend='RegisteredClass-Trisection'/></entry>
	  <entry align='center'>Conservative</entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/t1c_tri.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/t1c_tri.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/t2c_tri.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/t2c_tri.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/t3c_tri.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/t3c_tri.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	</row>
	<row>
	  <entry align='center'>Liberal</entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/t1l_tri.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/t1l_tri.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/t2l_tri.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/t2l_tri.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	  <entry align='center'>
	    <mediaobject>
	      <imageobject>
		<imagedata format="PNG" fileref="FIGURES/refine/t3l_tri.png"></imagedata>
	      </imageobject>
	      <imageobject>
		<imagedata format="EPS" fileref="FIGURES/refine/t3l_tri.eps"></imagedata>
	      </imageobject>
	    </mediaobject>
	  </entry>
	</row>
      </tbody>
    </tgroup>
  </table>

  <!-- Keep this comment at the end of the file
  Local variables:
  sgml-omittag:t
  sgml-shorttag:t 
  sgml-namecase-general:nil
  sgml-minimize-attributes:nil
  sgml-always-quote-attributes:t
  sgml-indent-step:2
  sgml-indent-data:t
  sgml-parent-document:("../../man_oof2.xml" "book" "chapter" "refentry" "refsect1")
  sgml-exposed-tags:nil
  sgml-local-ecat-files:nil
  End:
  -->
